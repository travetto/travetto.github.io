<h1 id="travetto-context">Context</h1>
<p>Provides a simple wrapper around <code>async_hooks</code> to provide request context across async calls.  </p>
<p>The most common way of utilizing the context, is via the <code>@WithContext</code> decorator.
The decorator will load the context on invocation, and will keep the context active during
the entire asynchronous call chain.</p>
<p>For the decorator to work, it require the <code>class</code> to have a context object already defined on it.</p>
<pre><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">TestableContext</span> <span class="token punctuation">{{ "{" }}</span>

   <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> context<span class="token punctuation">:</span>Context<span class="token punctuation">)</span><span class="token punctuation">{{ "{" }}</span><span class="token punctuation">{{ "}" }}</span>

   @<span class="token meta">WithContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">async</span> <span class="token function">complexOperator</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{{ "{" }}</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token punctuation">{{ "{" }}</span> name <span class="token punctuation">{{ "}" }}</span><span class="token punctuation">)</span>
     <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">additionalOp</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">{{ "}" }}</span>

   <span class="token keyword">async</span> <span class="token function">additionalOp</span><span class="token punctuation">(</span>check<span class="token punctuation">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{{ "{" }}</span>
     <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name <span class="token operator">===</span> check<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">{{ "}" }}</span>
<span class="token punctuation">{{ "}" }}</span></code></pre>


