<div class="documentation"><h1 id="log">Log</h1>
<p>This module provides logging functionality relying up the built in <code class="inline language-typescript">console</code> operations. This is achieved via AST transformations. The code is rewritten at compile time to transform the <code>console</code> operations into proper logging commands. In addition to the transformation, class name and line number are added to the log messages to provide additional context.</p>
<p>The supported operations are:</p>
<ul>
<li><code>console.fatal</code> which logs at the <code>FATAL</code> level</li>
<li><code>console.error</code> which logs at the <code>ERROR</code> level</li>
<li><code>console.warn</code> which logs at the <code>WARN</code> level</li>
<li><code>console.info</code> which logs at the <code>INFO</code> level</li>
<li><code>console.debug</code> which logs at the <code>DEBUG</code> level</li>
<li><code>console.trace</code> which logs at the <code>TRACE</code> level</li>
<li><code>console.log</code> which logs at the <code>INFO</code> level</li>
</ul>
<p><strong>Note:</strong> In production mode, all <code>console.debug</code> and <code>console.trace</code> invocations are compiled away for performance/security reasons. This means that the code is actually removed, and will not execute.</p>
<p>A sample of the transformation would be:</p>
<pre><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'Start Work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
  <span class="token keyword">try</span> <span class="token punctuation">{{ '{' }}</span>
    <span class="token operator">...</span> bad invocation <span class="token operator">...</span>
  <span class="token punctuation">{{ '}' }}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{ '}' }}</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'End Work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">{{ '}' }}</span></code></pre><p>Which, when in <em>dev</em> mode transforms into:</p>
<pre><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span>
  Logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'trace'</span><span class="token punctuation">,</span> <span class="token string">'Start Work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{{ '{' }}</span>
    <span class="token operator">...</span> bad invocation <span class="token operator">...</span>
  <span class="token punctuation">{{ '}' }}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span> 
    Logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{ '}' }}</span>
  Logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'trace'</span><span class="token punctuation">,</span> <span class="token string">'End Work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">{{ '}' }}</span></code></pre><p>And when in <em>prod</em> mode transforms into:</p>
<pre><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{{ '{' }}</span>
    <span class="token operator">...</span> bad invocation <span class="token operator">...</span>
  <span class="token punctuation">{{ '}' }}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{{ '{' }}</span> 
    Logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{{ '}' }}</span>
<span class="token punctuation">{{ '}' }}</span></code></pre><p>The logging output, as indicated provides context for location of invocation. Given the file <code class="path">test/simple.ts</code>:</p>
<pre><code class="language-typescript"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woah!'</span><span class="token punctuation">,</span> <span class="token punctuation">{{ '{' }}</span> a<span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span> b<span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span> c<span class="token punctuation">:</span> <span class="token punctuation">{{ '{' }}</span> d<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">{{ '}' }}</span> <span class="token punctuation">{{ '}' }}</span> <span class="token punctuation">{{ '}' }}</span> <span class="token punctuation">{{ '}' }}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Woah!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The corresponding output would be</p>
<pre><code class="language-output">undefined</code></pre></div>
